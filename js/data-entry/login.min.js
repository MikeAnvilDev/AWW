function getUserToken(e) { if (e) { var o = $("#Username").val(), a = $("#Password").val(); $.support.cors, console.log("login.js: getUserToken: retrieving token"), ajaxRequest = $.ajax({ url: "https://msapps.acesag.auburn.edu/acesauth/aww/token", dataType: "json", type: "POST", crossDomain: !0, contentType: "application/json", dataType: "json", data: { grant_type: "password", username: o, password: a, client_id: "150c58294e8a408dae9f115a9d2185c2" }, cache: !1, success: function (e) { console.log("login.js: getUserToken: ajax success"), console.log(e), e.hasOwnProperty("access_token") && (storeToken(e.access_token), location.href = "../type/index.html") }, error: function (e, o, a) { console.log("login.js: getUserToken: ajax error"), console.log(e), displayContentOverlay(!1); var r = "An error has occurred with your login credentials."; e.hasOwnProperty("responseText") && (reponseObj = jQuery.parseJSON(e.responseText), console.log(reponseObj), r = reponseObj.error_description), $("#Username").addClass("ml-alert"), $("#Password").addClass("ml-alert"); var n = $(".ml-val-container"), s = n.find(".ml-val-message"); 0 == s.length && (s = $('<p class="ml-val-message"></p>'), s.prependTo(n)), s.append(r + " ") } }) } } function redirectToType() { location.href = "../type/index.html" } $(document).ready(function () { getQueryVariable("logout").length > 0 && clearTokenWithError("You have successfully logged out."); var e = getQueryVariable("error"); if (getQueryVariable("error").length > 0) { var o = $(".ml-val-container"), a = o.find(".ml-val-message"); 0 == a.length && (a = $('<p class="ml-val-message"></p>'), a.prependTo(o)), a.append(decodeURIComponent(e)) } token = getToken(), null != token && validateToken(redirectToType) });