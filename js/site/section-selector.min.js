function SectionSelector_SetUp() { var a = $("div.section-selector"); a.each(function (a) { var b = $(this); b.attr("index", a); var c = b.find("> div.ss-nav li"); c.each(function (a) { var b = $(this); b.attr("index", a), b.click(function () { SectionSelector_StartSelection($(this)) }) }); var d = b.find("> div.ss-select select"); d.find("option").each(function (a) { $(this).attr("value", a) }), d.change(function () { SectionSelector_UpdateSelection($(this)) }) }), SectionSelector_GoToHash() } function SectionSelector_StartSelection(a) { var b = a.attr("index"), c = a.closest("div.section-selector"), d = c.find("> div.ss-select select"); d.val(b), SectionSelector_UpdateSelection(d), c.find("> div.ss-nav").stop().animate({ height: "0px", paddingBottom: "0px" }, function () { $(this).hide() }), c.find("> div.ss-select").stop().show().animate({ top: 50 }), c.find("> div.ss-sections").stop().animate({ top: 90 }) } function SectionSelector_UpdateSelection(a) { var b = a[0].selectedIndex, c = a.closest("div.section-selector"); SectionSelector_UpdateHash(c.attr("index") + "_" + a[0].selectedIndex); var d = a.closest("div.section-selector").find("> div.ss-sections > section"), e = a.closest("div.section-selector").find("> div.ss-sections > section.ss-active"), f = d.eq(b); 0 == e.length ? f.addClass("ss-active") : (e.stop().addClass("ss-shift").animate({ left: "-100%" }, function () { $(this).removeClass("ss-shift").removeClass("ss-active") }), f.stop().addClass("ss-active ss-upper ss-shift").css({ left: "100%" }).animate({ left: "0%" }, function () { $(this).removeClass("ss-shift").removeClass("ss-upper") })) } function SectionSelector_GoToHash() { var a = window.location.hash; if (a.length > 0) { var a = a.substr(1), b = a.split("_"), c = $("div.section-selector"), d = c.eq(b[0]).find("> div.ss-nav li"), e = d.eq(b[1]); SectionSelector_StartSelection(e) } } function SectionSelector_UpdateHash(a) { window.location.hash = a } function SectionSelector_Link_GoTo(a, b) { var c = $("div.section-selector"), d = c.eq(a).find("> div.ss-nav li"), e = d.eq(b); SectionSelector_StartSelection(e) } function DetailView_SetUp() { var a = $("div.detail-viewer"); a.each(function (b) { var c = a.find("ul li span.detail-label"); c.each(function () { $label = $(this); var a = $label.closest("li").find("div.detail-view"), b = $('<p class="detail-close"><span class="top"></span><span class="bottom"></span></p>'); b.click(function () { DetailView_CloseView($(this)) }), a.append(b), $label.click(function () { DetailView_UpdateView($(this)) }) }) }) } function DetailView_UpdateView(a) { var b = a.closest("li").find("div.detail-view"); $("body").css({ overflow: "hidden" }), b.fadeIn() } function DetailView_CloseView(a) { var b = a.closest("div.detail-view"); $("body").css({ overflow: "auto" }), b.css({ overflow: "hidden" }).fadeOut() } $(document).ready(function () { SectionSelector_SetUp() }), $(document).ready(function () { DetailView_SetUp() });