function getUserToken(a) { if (a) { var b = $("#Username").val(), c = $("#Password").val(); $.support.cors, console.log("login.js: getUserToken: retrieving token"), ajaxRequest = $.ajax({ url: "https://msapps.acesag.auburn.edu/acesauth/aww/token", dataType: "json", type: "POST", crossDomain: !0, contentType: "application/json", dataType: "json", data: { grant_type: "password", username: b, password: c, client_id: "150c58294e8a408dae9f115a9d2185c2" }, cache: !1, success: function (a) { console.log("login.js: getUserToken: ajax success"), console.log(a), a.hasOwnProperty("access_token") && (storeToken(a.access_token), location.href = "../type/index.html") }, error: function (a, b, c) { console.log("login.js: getUserToken: ajax error"), console.log(a), displayContentOverlay(!1); var d = "An error has occurred with your login credentials."; a.hasOwnProperty("responseText") && (reponseObj = jQuery.parseJSON(a.responseText), console.log(reponseObj), d = reponseObj.error_description), $("#Username").addClass("ml-alert"), $("#Password").addClass("ml-alert"); var e = $(".ml-val-container"), f = e.find(".ml-val-message"); 0 == f.length && (f = $('<p class="ml-val-message"></p>'), f.prependTo(e)), f.append(d + " ") } }) } } function redirectToType() { location.href = "../type/index.html" } $(document).ready(function () { getQueryVariable("logout").length > 0 && clearTokenWithError("You have successfully logged out."); var a = getQueryVariable("error"); if (getQueryVariable("error").length > 0) { var b = $(".ml-val-container"), c = b.find(".ml-val-message"); 0 == c.length && (c = $('<p class="ml-val-message"></p>'), c.prependTo(b)), c.append(decodeURIComponent(a)) } token = getToken(), null != token && validateToken(redirectToType) });