function retrieveReport() { displayContentOverlay(!0), $.support.cors; var e = getToken(); if (null != e) { var r = $("#ReportList").attr("reportType"), a = "https://msapps.acesag.auburn.edu/aww/api/home/GetChemReports"; "bacteria" == r && (a = "https://msapps.acesag.auburn.edu/aww/api/home/GetBacReports"), $.ajax({ url: a, type: "GET", contentType: "application/json", dataType: "json", headers: { Authorization: "Bearer " + e }, cache: !1, success: function (e) { var a = $("#ReportList"), t = null; t = "bacteria" == r ? e.bacReports : e.chemReports, $.each(t, function (e, r) { var t = r.date.split("T"), o = $("<li>Report Generated on " + t[0] + " by " + r.author + ' <a href="' + r.url + '" target="_blank"><span>Link</span></a></li>'); a.append(o) }), displayContentOverlay(!1) }, error: function (e, r, a) { var t = "Your session has expired."; e.hasOwnProperty("responseText") && (reponseObj = jQuery.parseJSON(e.responseText), t = reponseObj.error_description), clearTokenWithError(t) } }) } else clearToken() } $(window).on("load", function () { validateToken(retrieveReport) });