function SectionSelector_SetUp() { var e = $("div.section-selector"); e.each(function (e) { var t = $(this); t.attr("index", e); var i = t.find("> div.ss-nav li"); i.each(function (e) { var t = $(this); t.attr("index", e), t.click(function () { SectionSelector_StartSelection($(this)) }) }); var s = t.find("> div.ss-select select"); s.find("option").each(function (e) { $(this).attr("value", e) }), s.change(function () { SectionSelector_UpdateSelection($(this)) }) }), SectionSelector_GoToHash() } function SectionSelector_StartSelection(e) { var t = e.attr("index"), i = e.closest("div.section-selector"), s = i.find("> div.ss-select select"); s.val(t), SectionSelector_UpdateSelection(s), i.find("> div.ss-nav").stop().animate({ height: "0px", paddingBottom: "0px" }, function () { $(this).hide() }), i.find("> div.ss-select").stop().show().animate({ top: 70 }), i.find("> div.ss-sections").stop().animate({ top: 110 }) } function SectionSelector_UpdateSelection(e) { var t = e[0].selectedIndex, i = e.closest("div.section-selector"); SectionSelector_UpdateHash(i.attr("index") + "_" + e[0].selectedIndex); var s = e.closest("div.section-selector").find("> div.ss-sections > section"), n = e.closest("div.section-selector").find("> div.ss-sections > section.ss-active"), o = s.eq(t); 0 == n.length ? o.addClass("ss-active") : (n.stop().addClass("ss-shift").animate({ left: "-100%" }, function () { $(this).removeClass("ss-shift").removeClass("ss-active") }), o.stop().addClass("ss-active ss-upper ss-shift").css({ left: "100%" }).animate({ left: "0%" }, function () { $(this).removeClass("ss-shift").removeClass("ss-upper") })) } function SectionSelector_GoToHash() { var e = window.location.hash; if (e.length > 0) { var e = e.substr(1), t = e.split("_"), i = $("div.section-selector"), s = i.eq(t[0]).find("> div.ss-nav li"), n = s.eq(t[1]); SectionSelector_StartSelection(n) } } function SectionSelector_UpdateHash(e) { window.location.hash = e } function SectionSelector_Link_GoTo(e, t) { var i = $("div.section-selector"), s = i.eq(e).find("> div.ss-nav li"), n = s.eq(t); SectionSelector_StartSelection(n) } function DetailView_SetUp() { var e = $("div.detail-viewer"); e.each(function (t) { var i = e.find("ul li span.detail-label"); i.each(function () { $label = $(this); var e = $label.closest("li").find("div.detail-view"), t = $('<p class="detail-close"><span class="top"></span><span class="bottom"></span></p>'); t.click(function () { DetailView_CloseView($(this)) }), e.append(t), $label.click(function () { DetailView_UpdateView($(this)) }) }) }) } function DetailView_UpdateView(e) { var t = e.closest("li").find("div.detail-view"); $("body").css({ overflow: "hidden" }), t.fadeIn() } function DetailView_CloseView(e) { var t = e.closest("div.detail-view"); $("body").css({ overflow: "auto" }), t.css({ overflow: "hidden" }).fadeOut() } $(document).ready(function () { SectionSelector_SetUp() }), $(document).ready(function () { DetailView_SetUp() });